<html>
  <body>
    <h1>1</h1>

    <div class="cons">x</div>

    <a href="demo.html">xxxxxxxxxxx</a>

    <script>


        let print = (s) => {
            console.log('####',s);
            document.querySelector(".cons").innerHTML =  s + '<br\>' + document.querySelector(".cons").innerHTML;
        };

        let record = (what, ev, props) => {
            let r = props.reduce((a, prop) => {
                    if (ev[prop]) {
                        if (ev[prop].constructor == Object && Object.keys(ev[prop]).length == 0) return a; 
                        a[prop] = ev[prop]; 
                        //print('prop: ' +  prop + ' '  + JSON.stringify(a[prop]));
                    };
                    return a;
                }, {});
            r['what'] = what;
            r['t'] = Date.now();
            print(what + ' :: ' + JSON.stringify(r));
        }
        
        let handleOrientation  = (ev) => {
            //record('oriantation', ev, ['alpha', 'beta', 'gamma', 'timeStamp']);
        }

        let handleMotion = (ev) => {
            print('lll' + Object.keys(ev));
            /*
            let r = {};
            if (event.accelerationIncludingGravity.x) {r.accgx = event.accelerationIncludingGravity.x};
            if (event.accelerationIncludingGravity.y) {r.accgy = event.accelerationIncludingGravity.y};
            if (event.accelerationIncludingGravity.z) {r.accgz = event.accelerationIncludingGravity.z};
            if (event.acceleration.x) {r.accx = event.acceleration.x};
            if (event.acceleration.y) {r.accy = event.acceleration.y};
            if (event.acceleration.z) {r.accz = event.acceleration.z};
            if (event.interval) {r.interval = interval};
            print('motion' + ' :: ' + JSON.stringify(r));
            */
        }

        let main = () => {
            window.addEventListener("devicemotion", handleMotion);
            window.addEventListener("deviceorientation", handleOrientation);
        }

        main();
    </script>
  </body>
</html>
